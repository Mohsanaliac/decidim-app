{"ast":null,"code":"import \"bootstrap/dist/js/bootstrap.bundle.min.js\";\nimport '../stylesheets/decidim/idealchat/idealchat.css';\ndocument.addEventListener('DOMContentLoaded', function () {\n  // Initialize Font Awesome (with fallback)\n  var loadFontAwesome = function loadFontAwesome() {\n    var faScript = document.createElement('script');\n    faScript.src = 'https://kit.fontawesome.com/a076d05399.js';\n    faScript.async = true;\n    faScript.onerror = function () {\n      console.warn('Font Awesome failed to load. Using fallback icons.');\n      // Fallback: Add basic icons as text or local SVG\n    };\n    document.head.appendChild(faScript);\n  };\n  loadFontAwesome();\n  var tabLinks = document.querySelectorAll(\".tab-link\");\n  var tabContents = document.querySelectorAll(\".tab-content\");\n  var currentTab = \"tab1\";\n\n  // Store chat histories for each tab\n  var chatHistories = {\n    tab1: [],\n    tab2: [],\n    tab3: [],\n    tab4: []\n  };\n\n  // Initial welcome messages per tab\n  var welcomeMessages = {\n    tab1: \"Welcome to FastAPI Chat! How can I help you with FastAPI today?\",\n    tab2: \"Welcome to Legislation Chat! Ask me anything about laws and regulations.\",\n    tab3: \"Welcome to Reports Chat! I can help you with report-related questions.\",\n    tab4: \"Welcome to Documentation Chat! What would you like to know about our documentation?\"\n  };\n\n  // Append message to chat box\n  function appendMessage(tab, sender, text) {\n    var chatBox = document.getElementById(\"chat-box-\".concat(tab));\n    if (!chatBox) return;\n    var messageDiv = document.createElement(\"div\");\n    messageDiv.className = \"message \".concat(sender === 'user' ? 'user-message' : 'bot-message');\n    messageDiv.setAttribute('role', 'log');\n\n    // Message bubble\n    var bubble = document.createElement(\"div\");\n    bubble.className = \"message-bubble \".concat(sender === 'user' ? 'is-primary' : 'is-light');\n\n    // Message header (sender and time)\n    var header = document.createElement(\"div\");\n    header.className = \"message-header\";\n    header.innerHTML = \"\\n    <span class=\\\"message-sender\\\">\".concat(sender === 'user' ? 'You' : 'Bot', \"</span>\\n    <span class=\\\"message-time\\\">\").concat(new Date().toLocaleTimeString([], {\n      hour: '2-digit',\n      minute: '2-digit'\n    }), \"</span>\\n    \");\n\n    // Message content\n    var content = document.createElement(\"div\");\n    content.className = \"message-content\";\n    content.textContent = text;\n    bubble.appendChild(header);\n    bubble.appendChild(content);\n    messageDiv.appendChild(bubble);\n    chatBox.appendChild(messageDiv);\n\n    // Scroll to bottom\n    chatBox.scrollTop = chatBox.scrollHeight;\n\n    // Store in history if not FAQ/Settings tab\n    if (tab !== 'tab5' && tab !== 'tab6') {\n      chatHistories[tab].push({\n        sender: sender,\n        text: text,\n        time: new Date().toISOString()\n      });\n    }\n  }\n\n  // Send message to server\n  function sendMessage(tab) {\n    var input = document.getElementById(\"chat-input-\".concat(tab));\n    var sendBtn = document.getElementById(\"send-btn-\".concat(tab));\n    var message = input.value.trim();\n    if (!message) return;\n    appendMessage(tab, \"user\", message);\n    input.value = \"\";\n    sendBtn.disabled = true;\n    sendBtn.classList.add('is-loading');\n\n    // Determine the endpoint based on the tab\n    var endpoint = \"/idealchat/ask\";\n    if (tab === \"tab2\") endpoint = \"/idealchat/ask_legislation\";\n    if (tab === \"tab3\") endpoint = \"/idealchat/ask_reports\";\n    if (tab === \"tab4\") endpoint = \"/idealchat/ask_documentation\";\n    fetch(endpoint, {\n      method: \"POST\",\n      headers: {\n        \"Content-Type\": \"application/json\",\n        \"X-CSRF-Token\": document.querySelector('meta[name=\"csrf-token\"]').content\n      },\n      body: JSON.stringify({\n        message: message,\n        tab: tab.replace('tab', ''),\n        language: document.getElementById('language-select').value\n      })\n    }).then(function (response) {\n      if (!response.ok) {\n        throw new Error(\"HTTP error! Status: \".concat(response.status));\n      }\n      return response.json();\n    }).then(function (data) {\n      var answer = data.answer || \"I didn't understand that. Could you rephrase your question?\";\n      appendMessage(tab, \"bot\", answer);\n    })[\"catch\"](function (error) {\n      console.error('Error:', error);\n      appendMessage(tab, \"bot\", \"Sorry, an error occurred: \".concat(error.message, \". Please try again later.\"));\n    })[\"finally\"](function () {\n      sendBtn.disabled = false;\n      sendBtn.classList.remove('is-loading');\n      input.focus();\n    });\n  }\n\n  // Show welcome message on tab load\n  function showWelcomeMessage(tab) {\n    if (tab === \"tab5\" || tab === \"tab6\") return;\n    var chatBox = document.getElementById(\"chat-box-\".concat(tab));\n    if (chatBox && chatBox.children.length === 0) {\n      appendMessage(tab, \"bot\", welcomeMessages[tab]);\n    }\n  }\n\n  // Switch tabs\n  tabLinks.forEach(function (link) {\n    link.addEventListener(\"click\", function () {\n      // Remove active class from all tabs\n      tabLinks.forEach(function (t) {\n        t.classList.remove(\"is-active\");\n        t.removeAttribute(\"aria-current\");\n      });\n      // Add active to clicked tab\n      link.classList.add(\"is-active\");\n      link.setAttribute(\"aria-current\", \"page\");\n      var tab = link.dataset.tab;\n      currentTab = tab;\n\n      // Show correct tab content\n      tabContents.forEach(function (tc) {\n        tc.style.display = tc.id === tab ? \"flex\" : \"none\";\n        tc.setAttribute(\"aria-hidden\", tc.id === tab ? \"false\" : \"true\");\n      });\n\n      // Update header title and icon\n      var titleMap = {\n        tab1: \"FastAPI Chat\",\n        tab2: \"Legislation Chat\",\n        tab3: \"Reports Chat\",\n        tab4: \"Documentation Chat\",\n        tab5: \"FAQ\",\n        tab6: \"Settings\"\n      };\n      var iconMap = {\n        tab1: \"fa-comment\",\n        tab2: \"fa-gavel\",\n        tab3: \"fa-chart-bar\",\n        tab4: \"fa-file-alt\",\n        tab5: \"fa-question-circle\",\n        tab6: \"fa-cog\"\n      };\n      document.getElementById(\"chat-title\").textContent = titleMap[tab];\n      document.querySelector(\"#chat-header .icon i\").className = \"fas \".concat(iconMap[tab]);\n\n      // Show welcome message if needed\n      showWelcomeMessage(tab);\n    });\n\n    // Add keyboard support for accessibility\n    link.addEventListener(\"keydown\", function (e) {\n      if (e.key === \"Enter\" || e.key === \" \") {\n        e.preventDefault();\n        link.click();\n      }\n    });\n  });\n\n  // Handle FAQ toggle\n  document.querySelectorAll(\".faq-question\").forEach(function (q) {\n    q.addEventListener(\"click\", function () {\n      var answer = q.nextElementSibling;\n      var icon = q.querySelector('.icon i');\n      var isExpanded = answer.style.display === \"block\";\n      answer.style.display = isExpanded ? \"none\" : \"block\";\n      icon.className = \"fas \".concat(isExpanded ? 'fa-angle-down' : 'fa-angle-up');\n      q.setAttribute(\"aria-expanded\", !isExpanded);\n    });\n\n    // Add keyboard support for FAQ\n    q.addEventListener(\"keydown\", function (e) {\n      if (e.key === \"Enter\" || e.key === \" \") {\n        e.preventDefault();\n        q.click();\n      }\n    });\n  });\n\n  // Attach send button and enter key events\n  [\"tab1\", \"tab2\", \"tab3\", \"tab4\"].forEach(function (tab) {\n    var sendBtn = document.getElementById(\"send-btn-\".concat(tab));\n    var input = document.getElementById(\"chat-input-\".concat(tab));\n    sendBtn.addEventListener(\"click\", function () {\n      return sendMessage(tab);\n    });\n    input.addEventListener(\"keydown\", function (e) {\n      if (e.key === \"Enter\" && !e.shiftKey) {\n        e.preventDefault();\n        sendMessage(tab);\n      }\n    });\n  });\n\n  // Settings: Font size\n  var fontSizeSelect = document.getElementById(\"font-size-select\");\n  fontSizeSelect.addEventListener(\"change\", function () {\n    var size = this.value;\n    [\"tab1\", \"tab2\", \"tab3\", \"tab4\"].forEach(function (tab) {\n      var chatBox = document.getElementById(\"chat-box-\".concat(tab));\n      if (chatBox) chatBox.style.fontSize = size;\n    });\n  });\n\n  // Settings: Theme color\n  var themeColorSelect = document.getElementById(\"theme-color-select\");\n  themeColorSelect.addEventListener(\"change\", function () {\n    var color = this.value;\n    document.getElementById(\"chat-header\").style.backgroundColor = color;\n    document.querySelectorAll(\".is-primary\").forEach(function (el) {\n      el.style.backgroundColor = color;\n      el.style.borderColor = color;\n    });\n    // Update sidebar active tab border\n    document.querySelector(\".tab-link.is-active\").style.borderLeftColor = color;\n  });\n\n  // Settings: Language (placeholder for i18n)\n  var languageSelect = document.getElementById(\"language-select\");\n  languageSelect.addEventListener(\"change\", function () {\n    var lang = this.value;\n    // Placeholder for language switching logic\n    console.log(\"Language changed to: \".concat(lang));\n    // TODO: Implement i18n logic to update UI text\n  });\n\n  // Settings: Download chat history\n  var downloadBtn = document.getElementById(\"download-chat-btn\");\n  downloadBtn.addEventListener(\"click\", function () {\n    if (currentTab === \"tab5\" || currentTab === \"tab6\") {\n      alert(\"No chat history to download on this tab.\");\n      return;\n    }\n    var history = chatHistories[currentTab];\n    if (!history || history.length === 0) {\n      alert(\"No chat history to download.\");\n      return;\n    }\n    var content = \"Chat history for \".concat(document.getElementById(\"chat-title\").textContent, \":\\n\\n\");\n    history.forEach(function (item) {\n      var time = new Date(item.time).toLocaleString();\n      content += \"[\".concat(time, \"] \").concat(item.sender.toUpperCase(), \": \").concat(item.text, \"\\n\");\n    });\n    var blob = new Blob([content], {\n      type: \"text/plain\"\n    });\n    var url = URL.createObjectURL(blob);\n    var a = document.createElement(\"a\");\n    a.href = url;\n    a.download = \"chat_history_\".concat(currentTab, \"_\").concat(new Date().toISOString().slice(0, 10), \".txt\");\n    document.body.appendChild(a);\n    a.click();\n    document.body.removeChild(a);\n    URL.revokeObjectURL(url);\n  });\n\n  // Initial setup\n  showWelcomeMessage(\"tab1\");\n});","map":{"version":3,"names":["document","addEventListener","loadFontAwesome","faScript","createElement","src","async","onerror","console","warn","head","appendChild","tabLinks","querySelectorAll","tabContents","currentTab","chatHistories","tab1","tab2","tab3","tab4","welcomeMessages","appendMessage","tab","sender","text","chatBox","getElementById","concat","messageDiv","className","setAttribute","bubble","header","innerHTML","Date","toLocaleTimeString","hour","minute","content","textContent","scrollTop","scrollHeight","push","time","toISOString","sendMessage","input","sendBtn","message","value","trim","disabled","classList","add","endpoint","fetch","method","headers","querySelector","body","JSON","stringify","replace","language","then","response","ok","Error","status","json","data","answer","error","remove","focus","showWelcomeMessage","children","length","forEach","link","t","removeAttribute","dataset","tc","style","display","id","titleMap","tab5","tab6","iconMap","e","key","preventDefault","click","q","nextElementSibling","icon","isExpanded","shiftKey","fontSizeSelect","size","fontSize","themeColorSelect","color","backgroundColor","el","borderColor","borderLeftColor","languageSelect","lang","log","downloadBtn","alert","history","item","toLocaleString","toUpperCase","blob","Blob","type","url","URL","createObjectURL","a","href","download","slice","removeChild","revokeObjectURL"],"sources":["/home/mohsan/decidim/decidim_app/decidim-module-idealchat/app/packs/entrypoints/decidim_idealchat.js"],"sourcesContent":["import \"bootstrap/dist/js/bootstrap.bundle.min.js\";\n\nimport '../stylesheets/decidim/idealchat/idealchat.css';\n\n\ndocument.addEventListener('DOMContentLoaded', function() {\n// Initialize Font Awesome (with fallback)\nconst loadFontAwesome = () => {\n    const faScript = document.createElement('script');\n    faScript.src = 'https://kit.fontawesome.com/a076d05399.js';\n    faScript.async = true;\n    faScript.onerror = () => {\n    console.warn('Font Awesome failed to load. Using fallback icons.');\n    // Fallback: Add basic icons as text or local SVG\n    };\n    document.head.appendChild(faScript);\n};\nloadFontAwesome();\n\nconst tabLinks = document.querySelectorAll(\".tab-link\");\nconst tabContents = document.querySelectorAll(\".tab-content\");\nlet currentTab = \"tab1\";\n\n// Store chat histories for each tab\nconst chatHistories = {\n    tab1: [],\n    tab2: [],\n    tab3: [],\n    tab4: [],\n};\n\n// Initial welcome messages per tab\nconst welcomeMessages = {\n    tab1: \"Welcome to FastAPI Chat! How can I help you with FastAPI today?\",\n    tab2: \"Welcome to Legislation Chat! Ask me anything about laws and regulations.\",\n    tab3: \"Welcome to Reports Chat! I can help you with report-related questions.\",\n    tab4: \"Welcome to Documentation Chat! What would you like to know about our documentation?\",\n};\n\n// Append message to chat box\nfunction appendMessage(tab, sender, text) {\n    const chatBox = document.getElementById(`chat-box-${tab}`);\n    if (!chatBox) return;\n    \n    const messageDiv = document.createElement(\"div\");\n    messageDiv.className = `message ${sender === 'user' ? 'user-message' : 'bot-message'}`;\n    messageDiv.setAttribute('role', 'log');\n    \n    // Message bubble\n    const bubble = document.createElement(\"div\");\n    bubble.className = `message-bubble ${sender === 'user' ? 'is-primary' : 'is-light'}`;\n    \n    // Message header (sender and time)\n    const header = document.createElement(\"div\");\n    header.className = \"message-header\";\n    header.innerHTML = `\n    <span class=\"message-sender\">${sender === 'user' ? 'You' : 'Bot'}</span>\n    <span class=\"message-time\">${new Date().toLocaleTimeString([], {hour: '2-digit', minute:'2-digit'})}</span>\n    `;\n    \n    // Message content\n    const content = document.createElement(\"div\");\n    content.className = \"message-content\";\n    content.textContent = text;\n    \n    bubble.appendChild(header);\n    bubble.appendChild(content);\n    messageDiv.appendChild(bubble);\n    chatBox.appendChild(messageDiv);\n    \n    // Scroll to bottom\n    chatBox.scrollTop = chatBox.scrollHeight;\n\n    // Store in history if not FAQ/Settings tab\n    if (tab !== 'tab5' && tab !== 'tab6') {\n    chatHistories[tab].push({\n        sender, \n        text, \n        time: new Date().toISOString()\n    });\n    }\n}\n\n// Send message to server\nfunction sendMessage(tab) {\n    const input = document.getElementById(`chat-input-${tab}`);\n    const sendBtn = document.getElementById(`send-btn-${tab}`);\n    const message = input.value.trim();\n    \n    if (!message) return;\n\n    appendMessage(tab, \"user\", message);\n    input.value = \"\";\n    sendBtn.disabled = true;\n    sendBtn.classList.add('is-loading');\n\n    // Determine the endpoint based on the tab\n    let endpoint = \"/idealchat/ask\";\n    if (tab === \"tab2\") endpoint = \"/idealchat/ask_legislation\";\n    if (tab === \"tab3\") endpoint = \"/idealchat/ask_reports\";\n    if (tab === \"tab4\") endpoint = \"/idealchat/ask_documentation\";\n\n    fetch(endpoint, {\n    method: \"POST\",\n    headers: {\n        \"Content-Type\": \"application/json\",\n        \"X-CSRF-Token\": document.querySelector('meta[name=\"csrf-token\"]').content\n    },\n    body: JSON.stringify({ \n        message,\n        tab: tab.replace('tab', ''),\n        language: document.getElementById('language-select').value\n    })\n    })\n    .then(response => {\n    if (!response.ok) {\n        throw new Error(`HTTP error! Status: ${response.status}`);\n    }\n    return response.json();\n    })\n    .then(data => {\n    const answer = data.answer || \"I didn't understand that. Could you rephrase your question?\";\n    appendMessage(tab, \"bot\", answer);\n    })\n    .catch(error => {\n    console.error('Error:', error);\n    appendMessage(tab, \"bot\", `Sorry, an error occurred: ${error.message}. Please try again later.`);\n    })\n    .finally(() => {\n    sendBtn.disabled = false;\n    sendBtn.classList.remove('is-loading');\n    input.focus();\n    });\n}\n\n// Show welcome message on tab load\nfunction showWelcomeMessage(tab) {\n    if (tab === \"tab5\" || tab === \"tab6\") return;\n    const chatBox = document.getElementById(`chat-box-${tab}`);\n    if (chatBox && chatBox.children.length === 0) {\n    appendMessage(tab, \"bot\", welcomeMessages[tab]);\n    }\n}\n\n// Switch tabs\ntabLinks.forEach(link => {\n    link.addEventListener(\"click\", () => {\n    // Remove active class from all tabs\n    tabLinks.forEach(t => {\n        t.classList.remove(\"is-active\");\n        t.removeAttribute(\"aria-current\");\n    });\n    // Add active to clicked tab\n    link.classList.add(\"is-active\");\n    link.setAttribute(\"aria-current\", \"page\");\n    const tab = link.dataset.tab;\n    currentTab = tab;\n\n    // Show correct tab content\n    tabContents.forEach(tc => {\n        tc.style.display = (tc.id === tab) ? \"flex\" : \"none\";\n        tc.setAttribute(\"aria-hidden\", tc.id === tab ? \"false\" : \"true\");\n    });\n\n    // Update header title and icon\n    const titleMap = {\n        tab1: \"FastAPI Chat\",\n        tab2: \"Legislation Chat\",\n        tab3: \"Reports Chat\",\n        tab4: \"Documentation Chat\",\n        tab5: \"FAQ\",\n        tab6: \"Settings\"\n    };\n    const iconMap = {\n        tab1: \"fa-comment\",\n        tab2: \"fa-gavel\",\n        tab3: \"fa-chart-bar\",\n        tab4: \"fa-file-alt\",\n        tab5: \"fa-question-circle\",\n        tab6: \"fa-cog\"\n    };\n    document.getElementById(\"chat-title\").textContent = titleMap[tab];\n    document.querySelector(\"#chat-header .icon i\").className = `fas ${iconMap[tab]}`;\n\n    // Show welcome message if needed\n    showWelcomeMessage(tab);\n    });\n\n    // Add keyboard support for accessibility\n    link.addEventListener(\"keydown\", e => {\n    if (e.key === \"Enter\" || e.key === \" \") {\n        e.preventDefault();\n        link.click();\n    }\n    });\n});\n\n// Handle FAQ toggle\ndocument.querySelectorAll(\".faq-question\").forEach(q => {\n    q.addEventListener(\"click\", () => {\n    const answer = q.nextElementSibling;\n    const icon = q.querySelector('.icon i');\n    const isExpanded = answer.style.display === \"block\";\n    \n    answer.style.display = isExpanded ? \"none\" : \"block\";\n    icon.className = `fas ${isExpanded ? 'fa-angle-down' : 'fa-angle-up'}`;\n    q.setAttribute(\"aria-expanded\", !isExpanded);\n    });\n\n    // Add keyboard support for FAQ\n    q.addEventListener(\"keydown\", e => {\n    if (e.key === \"Enter\" || e.key === \" \") {\n        e.preventDefault();\n        q.click();\n    }\n    });\n});\n\n// Attach send button and enter key events\n[\"tab1\", \"tab2\", \"tab3\", \"tab4\"].forEach(tab => {\n    const sendBtn = document.getElementById(`send-btn-${tab}`);\n    const input = document.getElementById(`chat-input-${tab}`);\n\n    sendBtn.addEventListener(\"click\", () => sendMessage(tab));\n    input.addEventListener(\"keydown\", e => {\n    if (e.key === \"Enter\" && !e.shiftKey) {\n        e.preventDefault();\n        sendMessage(tab);\n    }\n    });\n});\n\n// Settings: Font size\nconst fontSizeSelect = document.getElementById(\"font-size-select\");\nfontSizeSelect.addEventListener(\"change\", function() {\n    const size = this.value;\n    [\"tab1\", \"tab2\", \"tab3\", \"tab4\"].forEach(tab => {\n    const chatBox = document.getElementById(`chat-box-${tab}`);\n    if (chatBox) chatBox.style.fontSize = size;\n    });\n});\n\n// Settings: Theme color\nconst themeColorSelect = document.getElementById(\"theme-color-select\");\nthemeColorSelect.addEventListener(\"change\", function() {\n    const color = this.value;\n    document.getElementById(\"chat-header\").style.backgroundColor = color;\n    document.querySelectorAll(\".is-primary\").forEach(el => {\n    el.style.backgroundColor = color;\n    el.style.borderColor = color;\n    });\n    // Update sidebar active tab border\n    document.querySelector(\".tab-link.is-active\").style.borderLeftColor = color;\n});\n\n// Settings: Language (placeholder for i18n)\nconst languageSelect = document.getElementById(\"language-select\");\nlanguageSelect.addEventListener(\"change\", function() {\n    const lang = this.value;\n    // Placeholder for language switching logic\n    console.log(`Language changed to: ${lang}`);\n    // TODO: Implement i18n logic to update UI text\n});\n\n// Settings: Download chat history\nconst downloadBtn = document.getElementById(\"download-chat-btn\");\ndownloadBtn.addEventListener(\"click\", () => {\n    if (currentTab === \"tab5\" || currentTab === \"tab6\") {\n    alert(\"No chat history to download on this tab.\");\n    return;\n    }\n    const history = chatHistories[currentTab];\n    if (!history || history.length === 0) {\n    alert(\"No chat history to download.\");\n    return;\n    }\n    \n    let content = `Chat history for ${document.getElementById(\"chat-title\").textContent}:\\n\\n`;\n    history.forEach(item => {\n    const time = new Date(item.time).toLocaleString();\n    content += `[${time}] ${item.sender.toUpperCase()}: ${item.text}\\n`;\n    });\n    \n    const blob = new Blob([content], {type: \"text/plain\"});\n    const url = URL.createObjectURL(blob);\n    const a = document.createElement(\"a\");\n    a.href = url;\n    a.download = `chat_history_${currentTab}_${new Date().toISOString().slice(0,10)}.txt`;\n    document.body.appendChild(a);\n    a.click();\n    document.body.removeChild(a);\n    URL.revokeObjectURL(url);\n});\n\n// Initial setup\nshowWelcomeMessage(\"tab1\");\n});\n\n\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}