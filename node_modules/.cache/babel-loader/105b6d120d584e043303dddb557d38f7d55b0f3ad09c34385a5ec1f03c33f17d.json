{"ast":null,"code":"import \"bootstrap/dist/js/bootstrap.bundle.min.js\";\nimport '../stylesheets/decidim/idealchat/idealchat.css';\ndocument.addEventListener('DOMContentLoaded', function () {\n  // Tab switching functionality\n  document.querySelectorAll(\".tab-link\").forEach(function (link) {\n    link.addEventListener(\"click\", function (e) {\n      e.preventDefault();\n\n      // Remove active class from all tabs\n      document.querySelectorAll(\".tab-link\").forEach(function (t) {\n        t.classList.remove(\"is-active\");\n        t.removeAttribute(\"aria-current\");\n        t.style.borderLeftColor = \"transparent\";\n        t.style.backgroundColor = \"\";\n      });\n\n      // Add active to clicked tab\n      link.classList.add(\"is-active\");\n      link.setAttribute(\"aria-current\", \"page\");\n      link.style.borderLeftColor = \"#4CAF50\";\n      link.style.backgroundColor = \"rgba(76, 175, 80, 0.1)\";\n      var tab = link.dataset.tab;\n\n      // Show correct tab content\n      document.querySelectorAll(\".tab-content\").forEach(function (tc) {\n        tc.style.display = tc.id === tab ? \"flex\" : \"none\";\n        tc.setAttribute(\"aria-hidden\", tc.id === tab ? \"false\" : \"true\");\n      });\n\n      // Update header title and icon\n      var titleMap = {\n        tab1: \"General Chat\",\n        tab2: \"Legislation Chat\",\n        tab3: \"Reports Chat\",\n        tab4: \"Social Indices Chat\",\n        tab5: \"FAQ\",\n        tab6: \"Settings\"\n      };\n      var iconMap = {\n        tab1: \"fa-comment\",\n        tab2: \"fa-gavel\",\n        tab3: \"fa-chart-bar\",\n        tab4: \"fa-file-alt\",\n        tab5: \"fa-question-circle\",\n        tab6: \"fa-cog\"\n      };\n      document.getElementById(\"chat-title\").textContent = titleMap[tab];\n      document.querySelector(\"#chat-header .icon i\").className = \"fas \".concat(iconMap[tab]);\n\n      // Focus input if it exists\n      var currentTabInput = document.getElementById(\"chat-input-\".concat(tab));\n      if (currentTabInput) {\n        setTimeout(function () {\n          return currentTabInput.focus();\n        }, 50);\n      }\n    });\n\n    // Add keyboard support for accessibility\n    link.addEventListener(\"keydown\", function (e) {\n      if (e.key === \"Enter\" || e.key === \" \") {\n        e.preventDefault();\n        link.click();\n      }\n    });\n  });\n\n  // FAQ toggle functionality\n  document.querySelectorAll(\".faq-question\").forEach(function (q) {\n    q.addEventListener(\"click\", function () {\n      var answer = q.nextElementSibling;\n      var icon = q.querySelector('.icon i');\n      var isExpanded = answer.style.display === \"block\";\n      answer.style.display = isExpanded ? \"none\" : \"block\";\n      icon.className = \"fas \".concat(isExpanded ? 'fa-angle-down' : 'fa-angle-up');\n      q.setAttribute(\"aria-expanded\", !isExpanded);\n    });\n\n    // Add keyboard support for FAQ\n    q.addEventListener(\"keydown\", function (e) {\n      if (e.key === \"Enter\" || e.key === \" \") {\n        e.preventDefault();\n        q.click();\n      }\n    });\n  });\n\n  // Send message functionality\n  document.querySelectorAll(\".send-btn\").forEach(function (btn) {\n    btn.addEventListener(\"click\", function () {\n      var tab = this.dataset.tab;\n      var endpoint = this.dataset.endpoint;\n      var input = document.getElementById(\"chat-input-\".concat(tab));\n      var message = input.value.trim();\n      if (!message) return;\n      appendMessage(tab, \"user\", message);\n      input.value = \"\";\n      this.disabled = true;\n      this.classList.add('is-loading');\n      fetch(endpoint, {\n        method: \"POST\",\n        headers: {\n          \"Content-Type\": \"application/json\",\n          \"X-CSRF-Token\": document.querySelector('meta[name=\"csrf-token\"]').content,\n          \"Accept\": \"application/json\"\n        },\n        body: JSON.stringify({\n          message: message,\n          language: document.getElementById('language-select').value\n        })\n      }).then(function (response) {\n        if (!response.ok) {\n          throw new Error(\"HTTP error! status: \".concat(response.status));\n        }\n        return response.json();\n      }).then(function (data) {\n        var answer = data.answer || \"I didn't understand that. Could you rephrase your question?\";\n        appendMessage(tab, \"bot\", answer);\n      })[\"catch\"](function (error) {\n        console.error('Error:', error);\n        appendMessage(tab, \"bot\", \"Error: \".concat(error.message));\n      })[\"finally\"](function () {\n        btn.disabled = false;\n        btn.classList.remove('is-loading');\n        input.focus();\n      });\n    });\n  });\n\n  // Enter key support for chat inputs\n  [\"tab1\", \"tab2\", \"tab3\", \"tab4\"].forEach(function (tab) {\n    var input = document.getElementById(\"chat-input-\".concat(tab));\n    if (input) {\n      input.addEventListener(\"keydown\", function (e) {\n        if (e.key === \"Enter\" && !e.shiftKey) {\n          e.preventDefault();\n          document.querySelector(\".send-btn[data-tab=\\\"\".concat(tab, \"\\\"]\")).click();\n        }\n      });\n    }\n  });\n\n  // Settings: Font size\n  document.getElementById(\"font-size-select\").addEventListener(\"change\", function () {\n    var size = this.value;\n    [\"tab1\", \"tab2\", \"tab3\", \"tab4\"].forEach(function (tab) {\n      var chatBox = document.getElementById(\"chat-box-\".concat(tab));\n      if (chatBox) chatBox.style.fontSize = size;\n    });\n  });\n\n  // Settings: Theme color\n  document.getElementById(\"theme-color-select\").addEventListener(\"change\", function () {\n    var color = this.value;\n    document.getElementById(\"chat-header\").style.backgroundColor = color;\n    document.querySelectorAll(\".is-primary\").forEach(function (el) {\n      el.style.backgroundColor = color;\n      el.style.borderColor = color;\n    });\n    // Update sidebar active tab border\n    document.querySelector(\".tab-link.is-active\").style.borderLeftColor = color;\n  });\n\n  // Settings: Download chat history\n  document.getElementById(\"download-chat-btn\").addEventListener(\"click\", function () {\n    var activeTab = document.querySelector(\".tab-link.is-active\").dataset.tab;\n    if (activeTab === \"tab5\" || activeTab === \"tab6\") {\n      alert(\"No chat history to download on this tab.\");\n      return;\n    }\n    var chatBox = document.getElementById(\"chat-box-\".concat(activeTab));\n    if (!chatBox || chatBox.children.length === 0) {\n      alert(\"No chat history to download.\");\n      return;\n    }\n    var content = \"Chat history for \".concat(document.getElementById(\"chat-title\").textContent, \":\\n\\n\");\n    Array.from(chatBox.children).forEach(function (message) {\n      var sender = message.querySelector(\".message-sender\").textContent;\n      var time = message.querySelector(\".message-time\").textContent;\n      var text = message.querySelector(\".message-content\").textContent;\n      content += \"[\".concat(time, \"] \").concat(sender, \": \").concat(text, \"\\n\");\n    });\n    var blob = new Blob([content], {\n      type: \"text/plain\"\n    });\n    var url = URL.createObjectURL(blob);\n    var a = document.createElement(\"a\");\n    a.href = url;\n    a.download = \"chat_history_\".concat(activeTab, \"_\").concat(new Date().toISOString().slice(0, 10), \".txt\");\n    document.body.appendChild(a);\n    a.click();\n    document.body.removeChild(a);\n    URL.revokeObjectURL(url);\n  });\n\n  // Helper function to append messages\n  function appendMessage(tab, sender, text) {\n    var chatBox = document.getElementById(\"chat-box-\".concat(tab));\n    if (!chatBox) return;\n    var messageDiv = document.createElement(\"div\");\n    messageDiv.className = \"message \".concat(sender === 'user' ? 'user-message' : 'bot-message');\n    messageDiv.setAttribute('role', 'log');\n    var bubble = document.createElement(\"div\");\n    bubble.className = \"message-bubble \".concat(sender === 'user' ? 'is-primary' : 'is-light');\n    var header = document.createElement(\"div\");\n    header.className = \"message-header\";\n    header.innerHTML = \"\\n      <span class=\\\"message-sender\\\">\".concat(sender === 'user' ? 'You' : 'Bot', \"</span>\\n      <span class=\\\"message-time\\\">\").concat(new Date().toLocaleTimeString([], {\n      hour: '2-digit',\n      minute: '2-digit'\n    }), \"</span>\\n    \");\n    var content = document.createElement(\"div\");\n    content.className = \"message-content\";\n    content.textContent = text;\n    bubble.appendChild(header);\n    bubble.appendChild(content);\n    messageDiv.appendChild(bubble);\n    chatBox.appendChild(messageDiv);\n\n    // Scroll to bottom\n    chatBox.scrollTop = chatBox.scrollHeight;\n  }\n\n  // Initial welcome messages\n  var welcomeMessages = {\n    tab1: \"Welcome to General Chat! How can I help you with General queries today?\",\n    tab2: \"Welcome to Legislation Chat! Ask me anything about laws and regulations.\",\n    tab3: \"Welcome to Reports Chat! I can help you with report-related questions.\",\n    tab4: \"Welcome to Social Indices Chat! What would you like to know about our Social Indices?\"\n  };\n\n  // Show welcome message for initial tab\n  appendMessage(\"tab1\", \"bot\", welcomeMessages[\"tab1\"]);\n});","map":{"version":3,"names":["document","addEventListener","querySelectorAll","forEach","link","e","preventDefault","t","classList","remove","removeAttribute","style","borderLeftColor","backgroundColor","add","setAttribute","tab","dataset","tc","display","id","titleMap","tab1","tab2","tab3","tab4","tab5","tab6","iconMap","getElementById","textContent","querySelector","className","concat","currentTabInput","setTimeout","focus","key","click","q","answer","nextElementSibling","icon","isExpanded","btn","endpoint","input","message","value","trim","appendMessage","disabled","fetch","method","headers","content","body","JSON","stringify","language","then","response","ok","Error","status","json","data","error","console","shiftKey","size","chatBox","fontSize","color","el","borderColor","activeTab","alert","children","length","Array","from","sender","time","text","blob","Blob","type","url","URL","createObjectURL","a","createElement","href","download","Date","toISOString","slice","appendChild","removeChild","revokeObjectURL","messageDiv","bubble","header","innerHTML","toLocaleTimeString","hour","minute","scrollTop","scrollHeight","welcomeMessages"],"sources":["/home/mohsan/decidim/decidim_app/decidim-module-idealchat/app/packs/entrypoints/decidim_idealchat.js"],"sourcesContent":["import \"bootstrap/dist/js/bootstrap.bundle.min.js\";\n\nimport '../stylesheets/decidim/idealchat/idealchat.css';\n\n\ndocument.addEventListener('DOMContentLoaded', function() {\n  // Tab switching functionality\n  document.querySelectorAll(\".tab-link\").forEach(link => {\n    link.addEventListener(\"click\", (e) => {\n      e.preventDefault();\n      \n      // Remove active class from all tabs\n      document.querySelectorAll(\".tab-link\").forEach(t => {\n        t.classList.remove(\"is-active\");\n        t.removeAttribute(\"aria-current\");\n        t.style.borderLeftColor = \"transparent\";\n        t.style.backgroundColor = \"\";\n      });\n      \n      // Add active to clicked tab\n      link.classList.add(\"is-active\");\n      link.setAttribute(\"aria-current\", \"page\");\n      link.style.borderLeftColor = \"#4CAF50\";\n      link.style.backgroundColor = \"rgba(76, 175, 80, 0.1)\";\n      \n      const tab = link.dataset.tab;\n\n      // Show correct tab content\n      document.querySelectorAll(\".tab-content\").forEach(tc => {\n        tc.style.display = (tc.id === tab) ? \"flex\" : \"none\";\n        tc.setAttribute(\"aria-hidden\", tc.id === tab ? \"false\" : \"true\");\n      });\n\n      // Update header title and icon\n      const titleMap = {\n        tab1: \"General Chat\",\n        tab2: \"Legislation Chat\",\n        tab3: \"Reports Chat\",\n        tab4: \"Social Indices Chat\",\n        tab5: \"FAQ\",\n        tab6: \"Settings\"\n      };\n      const iconMap = {\n        tab1: \"fa-comment\",\n        tab2: \"fa-gavel\",\n        tab3: \"fa-chart-bar\",\n        tab4: \"fa-file-alt\",\n        tab5: \"fa-question-circle\",\n        tab6: \"fa-cog\"\n      };\n      document.getElementById(\"chat-title\").textContent = titleMap[tab];\n      document.querySelector(\"#chat-header .icon i\").className = `fas ${iconMap[tab]}`;\n\n      // Focus input if it exists\n      const currentTabInput = document.getElementById(`chat-input-${tab}`);\n      if (currentTabInput) {\n        setTimeout(() => currentTabInput.focus(), 50);\n      }\n    });\n\n    // Add keyboard support for accessibility\n    link.addEventListener(\"keydown\", e => {\n      if (e.key === \"Enter\" || e.key === \" \") {\n        e.preventDefault();\n        link.click();\n      }\n    });\n  });\n\n  // FAQ toggle functionality\n  document.querySelectorAll(\".faq-question\").forEach(q => {\n    q.addEventListener(\"click\", () => {\n      const answer = q.nextElementSibling;\n      const icon = q.querySelector('.icon i');\n      const isExpanded = answer.style.display === \"block\";\n      \n      answer.style.display = isExpanded ? \"none\" : \"block\";\n      icon.className = `fas ${isExpanded ? 'fa-angle-down' : 'fa-angle-up'}`;\n      q.setAttribute(\"aria-expanded\", !isExpanded);\n    });\n\n    // Add keyboard support for FAQ\n    q.addEventListener(\"keydown\", e => {\n      if (e.key === \"Enter\" || e.key === \" \") {\n        e.preventDefault();\n        q.click();\n      }\n    });\n  });\n\n  // Send message functionality\n  document.querySelectorAll(\".send-btn\").forEach(btn => {\n    btn.addEventListener(\"click\", function() {\n      const tab = this.dataset.tab;\n      const endpoint = this.dataset.endpoint;\n      const input = document.getElementById(`chat-input-${tab}`);\n      const message = input.value.trim();\n      \n      if (!message) return;\n\n      appendMessage(tab, \"user\", message);\n      input.value = \"\";\n      this.disabled = true;\n      this.classList.add('is-loading');\n\n      fetch(endpoint, {\n        method: \"POST\",\n        headers: {\n          \"Content-Type\": \"application/json\",\n          \"X-CSRF-Token\": document.querySelector('meta[name=\"csrf-token\"]').content,\n          \"Accept\": \"application/json\"\n        },\n        body: JSON.stringify({\n          message: message,\n          language: document.getElementById('language-select').value\n        })\n      })\n      .then(response => {\n        if (!response.ok) {\n          throw new Error(`HTTP error! status: ${response.status}`);\n        }\n        return response.json();\n      })\n      .then(data => {\n        const answer = data.answer || \"I didn't understand that. Could you rephrase your question?\";\n        appendMessage(tab, \"bot\", answer);\n      })\n      .catch(error => {\n        console.error('Error:', error);\n        appendMessage(tab, \"bot\", `Error: ${error.message}`);\n      })\n      .finally(() => {\n        btn.disabled = false;\n        btn.classList.remove('is-loading');\n        input.focus();\n      });\n    });\n  });\n\n  // Enter key support for chat inputs\n  [\"tab1\", \"tab2\", \"tab3\", \"tab4\"].forEach(tab => {\n    const input = document.getElementById(`chat-input-${tab}`);\n    if (input) {\n      input.addEventListener(\"keydown\", e => {\n        if (e.key === \"Enter\" && !e.shiftKey) {\n          e.preventDefault();\n          document.querySelector(`.send-btn[data-tab=\"${tab}\"]`).click();\n        }\n      });\n    }\n  });\n\n  // Settings: Font size\n  document.getElementById(\"font-size-select\").addEventListener(\"change\", function() {\n    const size = this.value;\n    [\"tab1\", \"tab2\", \"tab3\", \"tab4\"].forEach(tab => {\n      const chatBox = document.getElementById(`chat-box-${tab}`);\n      if (chatBox) chatBox.style.fontSize = size;\n    });\n  });\n\n  // Settings: Theme color\n  document.getElementById(\"theme-color-select\").addEventListener(\"change\", function() {\n    const color = this.value;\n    document.getElementById(\"chat-header\").style.backgroundColor = color;\n    document.querySelectorAll(\".is-primary\").forEach(el => {\n      el.style.backgroundColor = color;\n      el.style.borderColor = color;\n    });\n    // Update sidebar active tab border\n    document.querySelector(\".tab-link.is-active\").style.borderLeftColor = color;\n  });\n\n  // Settings: Download chat history\n  document.getElementById(\"download-chat-btn\").addEventListener(\"click\", () => {\n    const activeTab = document.querySelector(\".tab-link.is-active\").dataset.tab;\n    if (activeTab === \"tab5\" || activeTab === \"tab6\") {\n      alert(\"No chat history to download on this tab.\");\n      return;\n    }\n    \n    const chatBox = document.getElementById(`chat-box-${activeTab}`);\n    if (!chatBox || chatBox.children.length === 0) {\n      alert(\"No chat history to download.\");\n      return;\n    }\n    \n    let content = `Chat history for ${document.getElementById(\"chat-title\").textContent}:\\n\\n`;\n    Array.from(chatBox.children).forEach(message => {\n      const sender = message.querySelector(\".message-sender\").textContent;\n      const time = message.querySelector(\".message-time\").textContent;\n      const text = message.querySelector(\".message-content\").textContent;\n      content += `[${time}] ${sender}: ${text}\\n`;\n    });\n    \n    const blob = new Blob([content], {type: \"text/plain\"});\n    const url = URL.createObjectURL(blob);\n    const a = document.createElement(\"a\");\n    a.href = url;\n    a.download = `chat_history_${activeTab}_${new Date().toISOString().slice(0,10)}.txt`;\n    document.body.appendChild(a);\n    a.click();\n    document.body.removeChild(a);\n    URL.revokeObjectURL(url);\n  });\n\n  // Helper function to append messages\n  function appendMessage(tab, sender, text) {\n    const chatBox = document.getElementById(`chat-box-${tab}`);\n    if (!chatBox) return;\n    \n    const messageDiv = document.createElement(\"div\");\n    messageDiv.className = `message ${sender === 'user' ? 'user-message' : 'bot-message'}`;\n    messageDiv.setAttribute('role', 'log');\n    \n    const bubble = document.createElement(\"div\");\n    bubble.className = `message-bubble ${sender === 'user' ? 'is-primary' : 'is-light'}`;\n    \n    const header = document.createElement(\"div\");\n    header.className = \"message-header\";\n    header.innerHTML = `\n      <span class=\"message-sender\">${sender === 'user' ? 'You' : 'Bot'}</span>\n      <span class=\"message-time\">${new Date().toLocaleTimeString([], {hour: '2-digit', minute:'2-digit'})}</span>\n    `;\n    \n    const content = document.createElement(\"div\");\n    content.className = \"message-content\";\n    content.textContent = text;\n    \n    bubble.appendChild(header);\n    bubble.appendChild(content);\n    messageDiv.appendChild(bubble);\n    chatBox.appendChild(messageDiv);\n    \n    // Scroll to bottom\n    chatBox.scrollTop = chatBox.scrollHeight;\n  }\n\n  // Initial welcome messages\n  const welcomeMessages = {\n    tab1: \"Welcome to General Chat! How can I help you with General queries today?\",\n    tab2: \"Welcome to Legislation Chat! Ask me anything about laws and regulations.\",\n    tab3: \"Welcome to Reports Chat! I can help you with report-related questions.\",\n    tab4: \"Welcome to Social Indices Chat! What would you like to know about our Social Indices?\",\n  };\n\n  // Show welcome message for initial tab\n  appendMessage(\"tab1\", \"bot\", welcomeMessages[\"tab1\"]);\n});\n\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}