{"ast":null,"code":"function _typeof(o) {\n  \"@babel/helpers - typeof\";\n\n  return _typeof = \"function\" == typeof Symbol && \"symbol\" == typeof Symbol.iterator ? function (o) {\n    return typeof o;\n  } : function (o) {\n    return o && \"function\" == typeof Symbol && o.constructor === Symbol && o !== Symbol.prototype ? \"symbol\" : typeof o;\n  }, _typeof(o);\n}\nfunction _classCallCheck(a, n) {\n  if (!(a instanceof n)) throw new TypeError(\"Cannot call a class as a function\");\n}\nfunction _defineProperties(e, r) {\n  for (var t = 0; t < r.length; t++) {\n    var o = r[t];\n    o.enumerable = o.enumerable || !1, o.configurable = !0, \"value\" in o && (o.writable = !0), Object.defineProperty(e, _toPropertyKey(o.key), o);\n  }\n}\nfunction _createClass(e, r, t) {\n  return r && _defineProperties(e.prototype, r), t && _defineProperties(e, t), Object.defineProperty(e, \"prototype\", {\n    writable: !1\n  }), e;\n}\nfunction _toPropertyKey(t) {\n  var i = _toPrimitive(t, \"string\");\n  return \"symbol\" == _typeof(i) ? i : i + \"\";\n}\nfunction _toPrimitive(t, r) {\n  if (\"object\" != _typeof(t) || !t) return t;\n  var e = t[Symbol.toPrimitive];\n  if (void 0 !== e) {\n    var i = e.call(t, r || \"default\");\n    if (\"object\" != _typeof(i)) return i;\n    throw new TypeError(\"@@toPrimitive must return a primitive value.\");\n  }\n  return (\"string\" === r ? String : Number)(t);\n}\nfunction _callSuper(t, o, e) {\n  return o = _getPrototypeOf(o), _possibleConstructorReturn(t, _isNativeReflectConstruct() ? Reflect.construct(o, e || [], _getPrototypeOf(t).constructor) : o.apply(t, e));\n}\nfunction _possibleConstructorReturn(t, e) {\n  if (e && (\"object\" == _typeof(e) || \"function\" == typeof e)) return e;\n  if (void 0 !== e) throw new TypeError(\"Derived constructors may only return object or undefined\");\n  return _assertThisInitialized(t);\n}\nfunction _assertThisInitialized(e) {\n  if (void 0 === e) throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");\n  return e;\n}\nfunction _isNativeReflectConstruct() {\n  try {\n    var t = !Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {}));\n  } catch (t) {}\n  return (_isNativeReflectConstruct = function _isNativeReflectConstruct() {\n    return !!t;\n  })();\n}\nfunction _getPrototypeOf(t) {\n  return _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf.bind() : function (t) {\n    return t.__proto__ || Object.getPrototypeOf(t);\n  }, _getPrototypeOf(t);\n}\nfunction _inherits(t, e) {\n  if (\"function\" != typeof e && null !== e) throw new TypeError(\"Super expression must either be null or a function\");\n  t.prototype = Object.create(e && e.prototype, {\n    constructor: {\n      value: t,\n      writable: !0,\n      configurable: !0\n    }\n  }), Object.defineProperty(t, \"prototype\", {\n    writable: !1\n  }), e && _setPrototypeOf(t, e);\n}\nfunction _setPrototypeOf(t, e) {\n  return _setPrototypeOf = Object.setPrototypeOf ? Object.setPrototypeOf.bind() : function (t, e) {\n    return t.__proto__ = e, t;\n  }, _setPrototypeOf(t, e);\n}\n/**\n * Example of a custom map controller and how to override the\n * `createMapController` factory method. To use it in the ERB view, add the\n * following snippet to any view:\n *\n * <%= dynamic_map_for type: \"custom\", markers: [{ title: \"Test 1\", latitude: 41.385063, longitude: 2.173404 }], popup_template_id: \"custom-popup\" do %>\n *  <% javascript_pack_tag(\"decidim_dev_test_custom_map\") %>\n *  <template id=\"custom-popup\">\n *    <div>\n *      <h3>${title}</h3>\n *    </div>\n *  </template>\n * <% end %>\n */\n\nimport MapMarkersController from \"src/decidim/map/controller/markers\";\nvar appendToBody = function appendToBody(content) {\n  var p = document.createElement(\"p\");\n  p.innerHTML = content;\n  document.body.appendChild(p);\n};\nvar CustomMapController = /*#__PURE__*/function (_MapMarkersController) {\n  function CustomMapController() {\n    _classCallCheck(this, CustomMapController);\n    return _callSuper(this, CustomMapController, arguments);\n  }\n  _inherits(CustomMapController, _MapMarkersController);\n  return _createClass(CustomMapController, [{\n    key: \"start\",\n    value: function start() {\n      this.markerClusters = null;\n      this.addMarkers(this.config.markers);\n      appendToBody(\"Custom map started\");\n    }\n  }]);\n}(MapMarkersController);\nvar origCreateMapController = window.Decidim.createMapController;\nvar createMapController = function createMapController(mapId, config) {\n  if (config.type === \"custom\") {\n    return new CustomMapController(mapId, config);\n  }\n  return origCreateMapController(mapId, config);\n};\nwindow.Decidim.createMapController = createMapController;\n\n// Prevent external requests to the Here URLs during tests\nif (L.TileLayer.HERE) {\n  L.TileLayer.HERE.prototype.onAdd = function (map) {};\n}\n\n// Test that the map events are working correctly\n$(\"[data-decidim-map]\").on(\"ready.decidim\", function (ev, _map, mapConfig) {\n  appendToBody(\"Custom map ready\");\n});\nappendToBody(\"LOADED\");","map":{"version":3,"names":["MapMarkersController","appendToBody","content","p","document","createElement","innerHTML","body","appendChild","CustomMapController","_MapMarkersController","_classCallCheck","_callSuper","arguments","_inherits","_createClass","key","value","start","markerClusters","addMarkers","config","markers","origCreateMapController","window","Decidim","createMapController","mapId","type","L","TileLayer","HERE","prototype","onAdd","map","$","on","ev","_map","mapConfig"],"sources":["/home/mohsan/.rbenv/versions/3.0.6/lib/ruby/gems/3.0.0/gems/decidim-dev-0.27.10/app/packs/src/decidim/dev/test/custom_map_factory.js"],"sourcesContent":["/**\n * Example of a custom map controller and how to override the\n * `createMapController` factory method. To use it in the ERB view, add the\n * following snippet to any view:\n *\n * <%= dynamic_map_for type: \"custom\", markers: [{ title: \"Test 1\", latitude: 41.385063, longitude: 2.173404 }], popup_template_id: \"custom-popup\" do %>\n *  <% javascript_pack_tag(\"decidim_dev_test_custom_map\") %>\n *  <template id=\"custom-popup\">\n *    <div>\n *      <h3>${title}</h3>\n *    </div>\n *  </template>\n * <% end %>\n */\n\nimport MapMarkersController from \"src/decidim/map/controller/markers\";\n\nconst appendToBody = (content) => {\n  const p = document.createElement(\"p\");\n  p.innerHTML = content;\n  document.body.appendChild(p);\n}\n\nclass CustomMapController extends MapMarkersController {\n  start() {\n    this.markerClusters = null;\n    this.addMarkers(this.config.markers);\n\n    appendToBody(\"Custom map started\");\n  }\n}\n\nconst origCreateMapController = window.Decidim.createMapController;\n\nconst createMapController = (mapId, config) => {\n  if (config.type === \"custom\") {\n    return new CustomMapController(mapId, config);\n  }\n\n  return origCreateMapController(mapId, config);\n}\n\nwindow.Decidim.createMapController = createMapController;\n\n// Prevent external requests to the Here URLs during tests\nif (L.TileLayer.HERE) {\n  L.TileLayer.HERE.prototype.onAdd = function(map) {};\n}\n\n// Test that the map events are working correctly\n$(\"[data-decidim-map]\").on(\"ready.decidim\", (ev, _map, mapConfig) => {\n  appendToBody(\"Custom map ready\");\n});\n\nappendToBody(\"LOADED\");\n"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA,OAAOA,oBAAoB,MAAM,oCAAoC;AAErE,IAAMC,YAAY,GAAG,SAAfA,YAAYA,CAAIC,OAAO,EAAK;EAChC,IAAMC,CAAC,GAAGC,QAAQ,CAACC,aAAa,CAAC,GAAG,CAAC;EACrCF,CAAC,CAACG,SAAS,GAAGJ,OAAO;EACrBE,QAAQ,CAACG,IAAI,CAACC,WAAW,CAACL,CAAC,CAAC;AAC9B,CAAC;AAAA,IAEKM,mBAAmB,0BAAAC,qBAAA;EAAA,SAAAD,oBAAA;IAAAE,eAAA,OAAAF,mBAAA;IAAA,OAAAG,UAAA,OAAAH,mBAAA,EAAAI,SAAA;EAAA;EAAAC,SAAA,CAAAL,mBAAA,EAAAC,qBAAA;EAAA,OAAAK,YAAA,CAAAN,mBAAA;IAAAO,GAAA;IAAAC,KAAA,EACvB,SAAAC,KAAKA,CAAA,EAAG;MACN,IAAI,CAACC,cAAc,GAAG,IAAI;MAC1B,IAAI,CAACC,UAAU,CAAC,IAAI,CAACC,MAAM,CAACC,OAAO,CAAC;MAEpCrB,YAAY,CAAC,oBAAoB,CAAC;IACpC;EAAC;AAAA,EAN+BD,oBAAoB;AAStD,IAAMuB,uBAAuB,GAAGC,MAAM,CAACC,OAAO,CAACC,mBAAmB;AAElE,IAAMA,mBAAmB,GAAG,SAAtBA,mBAAmBA,CAAIC,KAAK,EAAEN,MAAM,EAAK;EAC7C,IAAIA,MAAM,CAACO,IAAI,KAAK,QAAQ,EAAE;IAC5B,OAAO,IAAInB,mBAAmB,CAACkB,KAAK,EAAEN,MAAM,CAAC;EAC/C;EAEA,OAAOE,uBAAuB,CAACI,KAAK,EAAEN,MAAM,CAAC;AAC/C,CAAC;AAEDG,MAAM,CAACC,OAAO,CAACC,mBAAmB,GAAGA,mBAAmB;;AAExD;AACA,IAAIG,CAAC,CAACC,SAAS,CAACC,IAAI,EAAE;EACpBF,CAAC,CAACC,SAAS,CAACC,IAAI,CAACC,SAAS,CAACC,KAAK,GAAG,UAASC,GAAG,EAAE,CAAC,CAAC;AACrD;;AAEA;AACAC,CAAC,CAAC,oBAAoB,CAAC,CAACC,EAAE,CAAC,eAAe,EAAE,UAACC,EAAE,EAAEC,IAAI,EAAEC,SAAS,EAAK;EACnEtC,YAAY,CAAC,kBAAkB,CAAC;AAClC,CAAC,CAAC;AAEFA,YAAY,CAAC,QAAQ,CAAC","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}