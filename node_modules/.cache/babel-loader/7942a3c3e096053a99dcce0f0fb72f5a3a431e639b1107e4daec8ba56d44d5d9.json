{"ast":null,"code":"function _regenerator() {\n  /*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/babel/babel/blob/main/packages/babel-helpers/LICENSE */var e,\n    t,\n    r = \"function\" == typeof Symbol ? Symbol : {},\n    n = r.iterator || \"@@iterator\",\n    o = r.toStringTag || \"@@toStringTag\";\n  function i(r, n, o, i) {\n    var c = n && n.prototype instanceof Generator ? n : Generator,\n      u = Object.create(c.prototype);\n    return _regeneratorDefine2(u, \"_invoke\", function (r, n, o) {\n      var i,\n        c,\n        u,\n        f = 0,\n        p = o || [],\n        y = !1,\n        G = {\n          p: 0,\n          n: 0,\n          v: e,\n          a: d,\n          f: d.bind(e, 4),\n          d: function d(t, r) {\n            return i = t, c = 0, u = e, G.n = r, a;\n          }\n        };\n      function d(r, n) {\n        for (c = r, u = n, t = 0; !y && f && !o && t < p.length; t++) {\n          var o,\n            i = p[t],\n            d = G.p,\n            l = i[2];\n          r > 3 ? (o = l === n) && (u = i[(c = i[4]) ? 5 : (c = 3, 3)], i[4] = i[5] = e) : i[0] <= d && ((o = r < 2 && d < i[1]) ? (c = 0, G.v = n, G.n = i[1]) : d < l && (o = r < 3 || i[0] > n || n > l) && (i[4] = r, i[5] = n, G.n = l, c = 0));\n        }\n        if (o || r > 1) return a;\n        throw y = !0, n;\n      }\n      return function (o, p, l) {\n        if (f > 1) throw TypeError(\"Generator is already running\");\n        for (y && 1 === p && d(p, l), c = p, u = l; (t = c < 2 ? e : u) || !y;) {\n          i || (c ? c < 3 ? (c > 1 && (G.n = -1), d(c, u)) : G.n = u : G.v = u);\n          try {\n            if (f = 2, i) {\n              if (c || (o = \"next\"), t = i[o]) {\n                if (!(t = t.call(i, u))) throw TypeError(\"iterator result is not an object\");\n                if (!t.done) return t;\n                u = t.value, c < 2 && (c = 0);\n              } else 1 === c && (t = i[\"return\"]) && t.call(i), c < 2 && (u = TypeError(\"The iterator does not provide a '\" + o + \"' method\"), c = 1);\n              i = e;\n            } else if ((t = (y = G.n < 0) ? u : r.call(n, G)) !== a) break;\n          } catch (t) {\n            i = e, c = 1, u = t;\n          } finally {\n            f = 1;\n          }\n        }\n        return {\n          value: t,\n          done: y\n        };\n      };\n    }(r, o, i), !0), u;\n  }\n  var a = {};\n  function Generator() {}\n  function GeneratorFunction() {}\n  function GeneratorFunctionPrototype() {}\n  t = Object.getPrototypeOf;\n  var c = [][n] ? t(t([][n]())) : (_regeneratorDefine2(t = {}, n, function () {\n      return this;\n    }), t),\n    u = GeneratorFunctionPrototype.prototype = Generator.prototype = Object.create(c);\n  function f(e) {\n    return Object.setPrototypeOf ? Object.setPrototypeOf(e, GeneratorFunctionPrototype) : (e.__proto__ = GeneratorFunctionPrototype, _regeneratorDefine2(e, o, \"GeneratorFunction\")), e.prototype = Object.create(u), e;\n  }\n  return GeneratorFunction.prototype = GeneratorFunctionPrototype, _regeneratorDefine2(u, \"constructor\", GeneratorFunctionPrototype), _regeneratorDefine2(GeneratorFunctionPrototype, \"constructor\", GeneratorFunction), GeneratorFunction.displayName = \"GeneratorFunction\", _regeneratorDefine2(GeneratorFunctionPrototype, o, \"GeneratorFunction\"), _regeneratorDefine2(u), _regeneratorDefine2(u, o, \"Generator\"), _regeneratorDefine2(u, n, function () {\n    return this;\n  }), _regeneratorDefine2(u, \"toString\", function () {\n    return \"[object Generator]\";\n  }), (_regenerator = function _regenerator() {\n    return {\n      w: i,\n      m: f\n    };\n  })();\n}\nfunction _regeneratorDefine2(e, r, n, t) {\n  var i = Object.defineProperty;\n  try {\n    i({}, \"\", {});\n  } catch (e) {\n    i = 0;\n  }\n  _regeneratorDefine2 = function _regeneratorDefine(e, r, n, t) {\n    function o(r, n) {\n      _regeneratorDefine2(e, r, function (e) {\n        return this._invoke(r, n, e);\n      });\n    }\n    r ? i ? i(e, r, {\n      value: n,\n      enumerable: !t,\n      configurable: !t,\n      writable: !t\n    }) : e[r] = n : (o(\"next\", 0), o(\"throw\", 1), o(\"return\", 2));\n  }, _regeneratorDefine2(e, r, n, t);\n}\nfunction asyncGeneratorStep(n, t, e, r, o, a, c) {\n  try {\n    var i = n[a](c),\n      u = i.value;\n  } catch (n) {\n    return void e(n);\n  }\n  i.done ? t(u) : Promise.resolve(u).then(r, o);\n}\nfunction _asyncToGenerator(n) {\n  return function () {\n    var t = this,\n      e = arguments;\n    return new Promise(function (r, o) {\n      var a = n.apply(t, e);\n      function _next(n) {\n        asyncGeneratorStep(a, r, o, _next, _throw, \"next\", n);\n      }\n      function _throw(n) {\n        asyncGeneratorStep(a, r, o, _next, _throw, \"throw\", n);\n      }\n      _next(void 0);\n    });\n  };\n}\nimport \"bootstrap/dist/js/bootstrap.bundle.min.js\";\nimport '../stylesheets/decidim/idealchat/idealchat.css';\ndocument.addEventListener('DOMContentLoaded', function () {\n  // Initialize Font Awesome (with fallback)\n  var loadFontAwesome = function loadFontAwesome() {\n    var faScript = document.createElement('script');\n    faScript.src = 'https://kit.fontawesome.com/a076d05399.js';\n    faScript.async = true;\n    faScript.onerror = function () {\n      console.warn('Font Awesome failed to load. Using fallback icons.');\n      // Fallback: Add basic icons as text or local SVG\n    };\n    document.head.appendChild(faScript);\n  };\n  loadFontAwesome();\n  var tabLinks = document.querySelectorAll(\".tab-link\");\n  var tabContents = document.querySelectorAll(\".tab-content\");\n  var currentTab = \"tab1\";\n\n  // Store chat histories for each tab\n  var chatHistories = {\n    tab1: [],\n    tab2: [],\n    tab3: [],\n    tab4: []\n  };\n\n  // Initial welcome messages per tab\n  var welcomeMessages = {\n    tab1: \"Welcome to General Chat! How can I help you with General queries today?\",\n    tab2: \"Welcome to Legislation Chat! Ask me anything about laws and regulations.\",\n    tab3: \"Welcome to Reports Chat! I can help you with report-related questions.\",\n    tab4: \"Welcome to Social Indices Chat! What would you like to know about our Social Indices?\"\n  };\n\n  // Append message to chat box\n  function appendMessage(tab, sender, text) {\n    var chatBox = document.getElementById(\"chat-box-\".concat(tab));\n    if (!chatBox) return;\n    var messageDiv = document.createElement(\"div\");\n    messageDiv.className = \"message \".concat(sender === 'user' ? 'user-message' : 'bot-message');\n    messageDiv.setAttribute('role', 'log');\n\n    // Message bubble\n    var bubble = document.createElement(\"div\");\n    bubble.className = \"message-bubble \".concat(sender === 'user' ? 'is-primary' : 'is-light');\n\n    // Message header (sender and time)\n    var header = document.createElement(\"div\");\n    header.className = \"message-header\";\n    header.innerHTML = \"\\n        <span class=\\\"message-sender\\\">\".concat(sender === 'user' ? 'You' : 'Bot', \"</span>\\n        <span class=\\\"message-time\\\">\").concat(new Date().toLocaleTimeString([], {\n      hour: '2-digit',\n      minute: '2-digit'\n    }), \"</span>\\n      \");\n\n    // Message content\n    var content = document.createElement(\"div\");\n    content.className = \"message-content\";\n    content.textContent = text;\n    bubble.appendChild(header);\n    bubble.appendChild(content);\n    messageDiv.appendChild(bubble);\n    chatBox.appendChild(messageDiv);\n\n    // Scroll to bottom\n    chatBox.scrollTop = chatBox.scrollHeight;\n\n    // Store in history if not FAQ/Settings tab\n    if (tab !== 'tab5' && tab !== 'tab6') {\n      chatHistories[tab].push({\n        sender: sender,\n        text: text,\n        time: new Date().toISOString()\n      });\n    }\n  }\n  function getEndpoint(tab) {\n    var endpoints = {\n      'tab1': '/idealchat/ask',\n      'tab2': '/idealchat/ask_legislation',\n      'tab3': '/idealchat/ask_reports',\n      'tab4': '/idealchat/ask_documentation'\n    };\n    return endpoints[tab] || '/idealchat/ask';\n  }\n  function sendMessage(tab) {\n    var input = document.getElementById(\"chat-input-\".concat(tab));\n    var sendBtn = document.getElementById(\"send-btn-\".concat(tab));\n    var message = input.value.trim();\n    var endpoint = getEndpoint(tab);\n    if (!message) return;\n    appendMessage(tab, \"user\", message);\n    input.value = \"\";\n    sendBtn.disabled = true;\n    sendBtn.classList.add('is-loading');\n    fetch(endpoint, {\n      method: \"POST\",\n      headers: {\n        \"Content-Type\": \"application/json\",\n        \"X-CSRF-Token\": document.querySelector('meta[name=\"csrf-token\"]').content,\n        \"Accept\": \"application/json\"\n      },\n      body: JSON.stringify({\n        message: message,\n        language: document.getElementById('language-select').value\n      })\n    }).then(/*#__PURE__*/function () {\n      var _ref = _asyncToGenerator(/*#__PURE__*/_regenerator().m(function _callee(response) {\n        var contentType, html, error;\n        return _regenerator().w(function (_context) {\n          while (1) switch (_context.n) {\n            case 0:\n              contentType = response.headers.get('content-type'); // Check if response is HTML instead of JSON\n              if (!(contentType && contentType.includes('text/html'))) {\n                _context.n = 2;\n                break;\n              }\n              _context.n = 1;\n              return response.text();\n            case 1:\n              html = _context.v;\n              throw new Error(\"Received HTML instead of JSON. Might be authentication issue. \".concat(html.substring(0, 100), \"...\"));\n            case 2:\n              if (response.ok) {\n                _context.n = 4;\n                break;\n              }\n              _context.n = 3;\n              return response.json()[\"catch\"](function () {\n                return {};\n              });\n            case 3:\n              error = _context.v;\n              throw new Error(error.message || \"HTTP error! status: \".concat(response.status));\n            case 4:\n              return _context.a(2, response.json());\n          }\n        }, _callee);\n      }));\n      return function (_x) {\n        return _ref.apply(this, arguments);\n      };\n    }()).then(function (data) {\n      var answer = data.answer || \"I didn't understand that. Could you rephrase your question?\";\n      appendMessage(tab, \"bot\", answer);\n    })[\"catch\"](function (error) {\n      console.error('Error:', error);\n      appendMessage(tab, \"bot\", \"Error: \".concat(error.message));\n    })[\"finally\"](function () {\n      sendBtn.disabled = false;\n      sendBtn.classList.remove('is-loading');\n      input.focus();\n    });\n  }\n\n  // Show welcome message on tab load\n  function showWelcomeMessage(tab) {\n    if (tab === \"tab5\" || tab === \"tab6\") return;\n    var chatBox = document.getElementById(\"chat-box-\".concat(tab));\n    if (chatBox && chatBox.children.length === 0) {\n      appendMessage(tab, \"bot\", welcomeMessages[tab]);\n    }\n  }\n\n  // Switch tabstabLinks.forEach(link => {\n  link.addEventListener(\"click\", function () {\n    // Remove active class from all tabs\n    tabLinks.forEach(function (t) {\n      t.classList.remove(\"is-active\");\n      t.removeAttribute(\"aria-current\");\n      t.style.borderLeftColor = \"transparent\";\n      t.style.backgroundColor = \"\";\n    });\n\n    // Add active to clicked tab\n    link.classList.add(\"is-active\");\n    link.setAttribute(\"aria-current\", \"page\");\n    link.style.borderLeftColor = \"#4FFAF50\";\n    link.style.backgroundColor = \"rgba(76, 175, 80, 0.1)\";\n    var tab = link.dataset.tab;\n    currentTab = tab;\n\n    // Show correct tab content\n    tabContents.forEach(function (tc) {\n      tc.style.display = tc.id === tab ? \"flex\" : \"none\";\n      tc.setAttribute(\"aria-hidden\", tc.id === tab ? \"false\" : \"true\");\n    });\n    var currentTabInput = document.getElementById(\"chat-input-\".concat(tab));\n    if (currentTabInput) {\n      setTimeout(function () {\n        return currentTabInput.focus();\n      }, 50);\n    }\n\n    // Update header title and icon\n    var titleMap = {\n      tab1: \"General Chat\",\n      tab2: \"Legislation Chat\",\n      tab3: \"Reports Chat\",\n      tab4: \"Social Indices Chat\",\n      tab5: \"FAQ\",\n      tab6: \"Settings\"\n    };\n    var iconMap = {\n      tab1: \"fa-comment\",\n      tab2: \"fa-gavel\",\n      tab3: \"fa-chart-bar\",\n      tab4: \"fa-file-alt\",\n      tab5: \"fa-question-circle\",\n      tab6: \"fa-cog\"\n    };\n    document.getElementById(\"chat-title\").textContent = titleMap[tab];\n    document.querySelector(\"#chat-header .icon i\").className = \"fas \".concat(iconMap[tab]);\n\n    // Show welcome message if needed\n    showWelcomeMessage(tab);\n  });\n\n  // Add keyboard support for accessibility\n  link.addEventListener(\"keydown\", function (e) {\n    if (e.key === \"Enter\" || e.key === \" \") {\n      e.preventDefault();\n      link.click();\n    }\n  });\n});\n\n// Handle FAQ toggle\ndocument.querySelectorAll(\".faq-question\").forEach(function (q) {\n  q.addEventListener(\"click\", function () {\n    var answer = q.nextElementSibling;\n    var icon = q.querySelector('.icon i');\n    var isExpanded = answer.style.display === \"block\";\n    answer.style.display = isExpanded ? \"none\" : \"block\";\n    icon.className = \"fas \".concat(isExpanded ? 'fa-angle-down' : 'fa-angle-up');\n    q.setAttribute(\"aria-expanded\", !isExpanded);\n  });\n\n  // Add keyboard support for FAQ\n  q.addEventListener(\"keydown\", function (e) {\n    if (e.key === \"Enter\" || e.key === \" \") {\n      e.preventDefault();\n      q.click();\n    }\n  });\n});\n\n// Attach send button and enter key events\n[\"tab1\", \"tab2\", \"tab3\", \"tab4\"].forEach(function (tab) {\n  var sendBtn = document.getElementById(\"send-btn-\".concat(tab));\n  var input = document.getElementById(\"chat-input-\".concat(tab));\n  sendBtn.addEventListener(\"click\", function () {\n    return sendMessage(tab);\n  });\n  input.addEventListener(\"keydown\", function (e) {\n    if (e.key === \"Enter\" && !e.shiftKey) {\n      e.preventDefault();\n      sendMessage(tab);\n    }\n  });\n});\n\n// Settings: Font size\nvar fontSizeSelect = document.getElementById(\"font-size-select\");\nfontSizeSelect.addEventListener(\"change\", function () {\n  var size = this.value;\n  [\"tab1\", \"tab2\", \"tab3\", \"tab4\"].forEach(function (tab) {\n    var chatBox = document.getElementById(\"chat-box-\".concat(tab));\n    if (chatBox) chatBox.style.fontSize = size;\n  });\n});\n\n// Settings: Theme color\nvar themeColorSelect = document.getElementById(\"theme-color-select\");\nthemeColorSelect.addEventListener(\"change\", function () {\n  var color = this.value;\n  document.getElementById(\"chat-header\").style.backgroundColor = color;\n  document.querySelectorAll(\".is-primary\").forEach(function (el) {\n    el.style.backgroundColor = color;\n    el.style.borderColor = color;\n  });\n  // Update sidebar active tab border\n  document.querySelector(\".tab-link.is-active\").style.borderLeftColor = color;\n});\n\n// Settings: Language (placeholder for i18n)\nvar languageSelect = document.getElementById(\"language-select\");\nlanguageSelect.addEventListener(\"change\", function () {\n  var lang = this.value;\n  // Placeholder for language switching logic\n  console.log(\"Language changed to: \".concat(lang));\n  // TODO: Implement i18n logic to update UI text\n});\n\n// Settings: Download chat history\nvar downloadBtn = document.getElementById(\"download-chat-btn\");\ndownloadBtn.addEventListener(\"click\", function () {\n  if (currentTab === \"tab5\" || currentTab === \"tab6\") {\n    alert(\"No chat history to download on this tab.\");\n    return;\n  }\n  var history = chatHistories[currentTab];\n  if (!history || history.length === 0) {\n    alert(\"No chat history to download.\");\n    return;\n  }\n  var content = \"Chat history for \".concat(document.getElementById(\"chat-title\").textContent, \":\\n\\n\");\n  history.forEach(function (item) {\n    var time = new Date(item.time).toLocaleString();\n    content += \"[\".concat(time, \"] \").concat(item.sender.toUpperCase(), \": \").concat(item.text, \"\\n\");\n  });\n  var blob = new Blob([content], {\n    type: \"text/plain\"\n  });\n  var url = URL.createObjectURL(blob);\n  var a = document.createElement(\"a\");\n  a.href = url;\n  a.download = \"chat_history_\".concat(currentTab, \"_\").concat(new Date().toISOString().slice(0, 10), \".txt\");\n  document.body.appendChild(a);\n  a.click();\n  document.body.removeChild(a);\n  URL.revokeObjectURL(url);\n});\n\n// Initial setup\nshowWelcomeMessage(\"tab1\");","map":{"version":3,"names":["e","t","r","Symbol","n","iterator","o","toStringTag","i","c","prototype","Generator","u","Object","create","_regeneratorDefine2","f","p","y","G","v","a","d","bind","length","l","TypeError","call","done","value","GeneratorFunction","GeneratorFunctionPrototype","getPrototypeOf","setPrototypeOf","__proto__","displayName","_regenerator","w","m","defineProperty","_regeneratorDefine","_invoke","enumerable","configurable","writable","asyncGeneratorStep","Promise","resolve","then","_asyncToGenerator","arguments","apply","_next","_throw","document","addEventListener","loadFontAwesome","faScript","createElement","src","async","onerror","console","warn","head","appendChild","tabLinks","querySelectorAll","tabContents","currentTab","chatHistories","tab1","tab2","tab3","tab4","welcomeMessages","appendMessage","tab","sender","text","chatBox","getElementById","concat","messageDiv","className","setAttribute","bubble","header","innerHTML","Date","toLocaleTimeString","hour","minute","content","textContent","scrollTop","scrollHeight","push","time","toISOString","getEndpoint","endpoints","sendMessage","input","sendBtn","message","trim","endpoint","disabled","classList","add","fetch","method","headers","querySelector","body","JSON","stringify","language","_ref","_callee","response","contentType","html","error","_context","get","includes","Error","substring","ok","json","status","_x","data","answer","remove","focus","showWelcomeMessage","children","link","forEach","removeAttribute","style","borderLeftColor","backgroundColor","dataset","tc","display","id","currentTabInput","setTimeout","titleMap","tab5","tab6","iconMap","key","preventDefault","click","q","nextElementSibling","icon","isExpanded","shiftKey","fontSizeSelect","size","fontSize","themeColorSelect","color","el","borderColor","languageSelect","lang","log","downloadBtn","alert","history","item","toLocaleString","toUpperCase","blob","Blob","type","url","URL","createObjectURL","href","download","slice","removeChild","revokeObjectURL"],"sources":["/home/mohsan/decidim/decidim_app/decidim-module-idealchat/app/packs/entrypoints/decidim_idealchat.js"],"sourcesContent":["import \"bootstrap/dist/js/bootstrap.bundle.min.js\";\n\nimport '../stylesheets/decidim/idealchat/idealchat.css';\n\n\ndocument.addEventListener('DOMContentLoaded', function() {\n    // Initialize Font Awesome (with fallback)\n    const loadFontAwesome = () => {\n      const faScript = document.createElement('script');\n      faScript.src = 'https://kit.fontawesome.com/a076d05399.js';\n      faScript.async = true;\n      faScript.onerror = () => {\n        console.warn('Font Awesome failed to load. Using fallback icons.');\n        // Fallback: Add basic icons as text or local SVG\n      };\n      document.head.appendChild(faScript);\n    };\n    loadFontAwesome();\n\n    const tabLinks = document.querySelectorAll(\".tab-link\");\n    const tabContents = document.querySelectorAll(\".tab-content\");\n    let currentTab = \"tab1\";\n\n    // Store chat histories for each tab\n    const chatHistories = {\n      tab1: [],\n      tab2: [],\n      tab3: [],\n      tab4: [],\n    };\n\n    // Initial welcome messages per tab\n    const welcomeMessages = {\n      tab1: \"Welcome to General Chat! How can I help you with General queries today?\",\n      tab2: \"Welcome to Legislation Chat! Ask me anything about laws and regulations.\",\n      tab3: \"Welcome to Reports Chat! I can help you with report-related questions.\",\n      tab4: \"Welcome to Social Indices Chat! What would you like to know about our Social Indices?\",\n    };\n\n    // Append message to chat box\n    function appendMessage(tab, sender, text) {\n      const chatBox = document.getElementById(`chat-box-${tab}`);\n      if (!chatBox) return;\n      \n      const messageDiv = document.createElement(\"div\");\n      messageDiv.className = `message ${sender === 'user' ? 'user-message' : 'bot-message'}`;\n      messageDiv.setAttribute('role', 'log');\n      \n      // Message bubble\n      const bubble = document.createElement(\"div\");\n      bubble.className = `message-bubble ${sender === 'user' ? 'is-primary' : 'is-light'}`;\n      \n      // Message header (sender and time)\n      const header = document.createElement(\"div\");\n      header.className = \"message-header\";\n      header.innerHTML = `\n        <span class=\"message-sender\">${sender === 'user' ? 'You' : 'Bot'}</span>\n        <span class=\"message-time\">${new Date().toLocaleTimeString([], {hour: '2-digit', minute:'2-digit'})}</span>\n      `;\n      \n      // Message content\n      const content = document.createElement(\"div\");\n      content.className = \"message-content\";\n      content.textContent = text;\n      \n      bubble.appendChild(header);\n      bubble.appendChild(content);\n      messageDiv.appendChild(bubble);\n      chatBox.appendChild(messageDiv);\n      \n      // Scroll to bottom\n      chatBox.scrollTop = chatBox.scrollHeight;\n\n      // Store in history if not FAQ/Settings tab\n      if (tab !== 'tab5' && tab !== 'tab6') {\n        chatHistories[tab].push({\n          sender, \n          text, \n          time: new Date().toISOString()\n        });\n      }\n    }\n\nfunction getEndpoint(tab) {\n  const endpoints = {\n    'tab1': '/idealchat/ask',\n    'tab2': '/idealchat/ask_legislation', \n    'tab3': '/idealchat/ask_reports',\n    'tab4': '/idealchat/ask_documentation'\n  };\n  return endpoints[tab] || '/idealchat/ask';\n}\n\nfunction sendMessage(tab) {\n  const input = document.getElementById(`chat-input-${tab}`);\n  const sendBtn = document.getElementById(`send-btn-${tab}`);\n  const message = input.value.trim();\n  const endpoint = getEndpoint(tab);\n  \n  if (!message) return;\n\n  appendMessage(tab, \"user\", message);\n  input.value = \"\";\n  sendBtn.disabled = true;\n  sendBtn.classList.add('is-loading');\n\n  fetch(endpoint, {\n    method: \"POST\",\n    headers: {\n      \"Content-Type\": \"application/json\",\n      \"X-CSRF-Token\": document.querySelector('meta[name=\"csrf-token\"]').content,\n      \"Accept\": \"application/json\"\n    },\n    body: JSON.stringify({\n      message: message,\n      language: document.getElementById('language-select').value\n    })\n  })\n  .then(async response => {\n    const contentType = response.headers.get('content-type');\n    \n    // Check if response is HTML instead of JSON\n    if (contentType && contentType.includes('text/html')) {\n      const html = await response.text();\n      throw new Error(`Received HTML instead of JSON. Might be authentication issue. ${html.substring(0, 100)}...`);\n    }\n    \n    if (!response.ok) {\n      const error = await response.json().catch(() => ({}));\n      throw new Error(error.message || `HTTP error! status: ${response.status}`);\n    }\n    return response.json();\n  })\n  .then(data => {\n    const answer = data.answer || \"I didn't understand that. Could you rephrase your question?\";\n    appendMessage(tab, \"bot\", answer);\n  })\n  .catch(error => {\n    console.error('Error:', error);\n    appendMessage(tab, \"bot\", `Error: ${error.message}`);\n  })\n  .finally(() => {\n    sendBtn.disabled = false;\n    sendBtn.classList.remove('is-loading');\n    input.focus();\n  });\n}\n\n    // Show welcome message on tab load\n    function showWelcomeMessage(tab) {\n      if (tab === \"tab5\" || tab === \"tab6\") return;\n      const chatBox = document.getElementById(`chat-box-${tab}`);\n      if (chatBox && chatBox.children.length === 0) {\n        appendMessage(tab, \"bot\", welcomeMessages[tab]);\n      }\n    }\n\n    // Switch tabstabLinks.forEach(link => {\n  link.addEventListener(\"click\", () => {\n    // Remove active class from all tabs\n    tabLinks.forEach(t => {\n      t.classList.remove(\"is-active\");\n      t.removeAttribute(\"aria-current\");\n      t.style.borderLeftColor = \"transparent\";\n      t.style.backgroundColor = \"\";\n    });\n    \n    // Add active to clicked tab\n    link.classList.add(\"is-active\");\n    link.setAttribute(\"aria-current\", \"page\");\n    link.style.borderLeftColor = \"#4FFAF50\";\n    link.style.backgroundColor = \"rgba(76, 175, 80, 0.1)\";\n    \n    const tab = link.dataset.tab;\n    currentTab = tab;\n\n    // Show correct tab content\n    tabContents.forEach(tc => {\n      tc.style.display = (tc.id === tab) ? \"flex\" : \"none\";\n      tc.setAttribute(\"aria-hidden\", tc.id === tab ? \"false\" : \"true\");\n    });\n\n    const currentTabInput = document.getElementById(`chat-input-${tab}`);\n    if (currentTabInput) {\n      setTimeout(() => currentTabInput.focus(), 50);\n    }\n\n    // Update header title and icon\n    const titleMap = {\n      tab1: \"General Chat\",\n      tab2: \"Legislation Chat\",\n      tab3: \"Reports Chat\",\n      tab4: \"Social Indices Chat\",\n      tab5: \"FAQ\",\n      tab6: \"Settings\"\n    };\n    const iconMap = {\n      tab1: \"fa-comment\",\n      tab2: \"fa-gavel\",\n      tab3: \"fa-chart-bar\",\n      tab4: \"fa-file-alt\",\n      tab5: \"fa-question-circle\",\n      tab6: \"fa-cog\"\n    };\n    document.getElementById(\"chat-title\").textContent = titleMap[tab];\n    document.querySelector(\"#chat-header .icon i\").className = `fas ${iconMap[tab]}`;\n\n    // Show welcome message if needed\n    showWelcomeMessage(tab);\n  });\n\n\n      // Add keyboard support for accessibility\n      link.addEventListener(\"keydown\", e => {\n        if (e.key === \"Enter\" || e.key === \" \") {\n          e.preventDefault();\n          link.click();\n        }\n      });\n    });\n\n    // Handle FAQ toggle\n    document.querySelectorAll(\".faq-question\").forEach(q => {\n      q.addEventListener(\"click\", () => {\n        const answer = q.nextElementSibling;\n        const icon = q.querySelector('.icon i');\n        const isExpanded = answer.style.display === \"block\";\n        \n        answer.style.display = isExpanded ? \"none\" : \"block\";\n        icon.className = `fas ${isExpanded ? 'fa-angle-down' : 'fa-angle-up'}`;\n        q.setAttribute(\"aria-expanded\", !isExpanded);\n      });\n\n      // Add keyboard support for FAQ\n      q.addEventListener(\"keydown\", e => {\n        if (e.key === \"Enter\" || e.key === \" \") {\n          e.preventDefault();\n          q.click();\n        }\n      });\n    });\n\n    // Attach send button and enter key events\n    [\"tab1\", \"tab2\", \"tab3\", \"tab4\"].forEach(tab => {\n      const sendBtn = document.getElementById(`send-btn-${tab}`);\n      const input = document.getElementById(`chat-input-${tab}`);\n\n      sendBtn.addEventListener(\"click\", () => sendMessage(tab));\n      input.addEventListener(\"keydown\", e => {\n        if (e.key === \"Enter\" && !e.shiftKey) {\n          e.preventDefault();\n          sendMessage(tab);\n        }\n      });\n    });\n\n    // Settings: Font size\n    const fontSizeSelect = document.getElementById(\"font-size-select\");\n    fontSizeSelect.addEventListener(\"change\", function() {\n      const size = this.value;\n      [\"tab1\", \"tab2\", \"tab3\", \"tab4\"].forEach(tab => {\n        const chatBox = document.getElementById(`chat-box-${tab}`);\n        if (chatBox) chatBox.style.fontSize = size;\n      });\n    });\n\n    // Settings: Theme color\n    const themeColorSelect = document.getElementById(\"theme-color-select\");\n    themeColorSelect.addEventListener(\"change\", function() {\n      const color = this.value;\n      document.getElementById(\"chat-header\").style.backgroundColor = color;\n      document.querySelectorAll(\".is-primary\").forEach(el => {\n        el.style.backgroundColor = color;\n        el.style.borderColor = color;\n      });\n      // Update sidebar active tab border\n      document.querySelector(\".tab-link.is-active\").style.borderLeftColor = color;\n    });\n\n    // Settings: Language (placeholder for i18n)\n    const languageSelect = document.getElementById(\"language-select\");\n    languageSelect.addEventListener(\"change\", function() {\n      const lang = this.value;\n      // Placeholder for language switching logic\n      console.log(`Language changed to: ${lang}`);\n      // TODO: Implement i18n logic to update UI text\n    });\n\n    // Settings: Download chat history\n    const downloadBtn = document.getElementById(\"download-chat-btn\");\n    downloadBtn.addEventListener(\"click\", () => {\n      if (currentTab === \"tab5\" || currentTab === \"tab6\") {\n        alert(\"No chat history to download on this tab.\");\n        return;\n      }\n      const history = chatHistories[currentTab];\n      if (!history || history.length === 0) {\n        alert(\"No chat history to download.\");\n        return;\n      }\n      \n      let content = `Chat history for ${document.getElementById(\"chat-title\").textContent}:\\n\\n`;\n      history.forEach(item => {\n        const time = new Date(item.time).toLocaleString();\n        content += `[${time}] ${item.sender.toUpperCase()}: ${item.text}\\n`;\n      });\n      \n      const blob = new Blob([content], {type: \"text/plain\"});\n      const url = URL.createObjectURL(blob);\n      const a = document.createElement(\"a\");\n      a.href = url;\n      a.download = `chat_history_${currentTab}_${new Date().toISOString().slice(0,10)}.txt`;\n      document.body.appendChild(a);\n      a.click();\n      document.body.removeChild(a);\n      URL.revokeObjectURL(url);\n    });\n\n    // Initial setup\n    showWelcomeMessage(\"tab1\");\n\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}